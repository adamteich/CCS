clear
clc

alphas= [0.15, 0.4, 0.8];

beta = .5;
num_hands = 10000;
starting_cash = 100;
bust_limit = 7;

for i=1:length(alphas)
    for j=1:500
             middle_cards = randi([1 5], num_hands, 1);
            self_cards = randi([1 5], num_hands, 1);
            competitor_cards = randi([1 5], num_hands, 1);

            % for now, let's have the opponent fold only when they know they'll bust
            for z=1:num_hands
                if competitor_cards(z) + middle_cards(z) >= bust_limit
                    competitor_actions(z) = 0;
                else
                    competitor_actions(z) = 1;
                end
            end

            % opponent can bluff (play on a bust instead of folding) a given proportion of the time
            bluffProportion = 0.25;
            for s=1:length(competitor_actions)
                if competitor_actions(s)==0 && rand<bluffProportion
                    competitor_actions(s)=1;
                end
            end
        output = poker_simulation(alphas(i), beta, competitor_cards, competitor_actions, middle_cards, self_cards, starting_cash, bust_limit);
        bust(i,j)= output.bust;
    end
    
end
mean(bust,2)
ttest2(bust(1,:), bust(2,:))
